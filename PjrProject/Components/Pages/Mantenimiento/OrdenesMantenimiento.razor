@page "/ordenes"
@layout PjrProject.Components.Layout.MainLayout
@rendermode InteractiveServer

@using PjrProject.Models

<h2>🔧 Órdenes de Mantenimiento</h2>

<div class="form-container">
    <input @bind="nuevaDescripcion" placeholder="Descripción" />
    <input @bind="nuevoResponsable" placeholder="Responsable" />
    <button @onclick="AgregarOrden">Agregar</button>
</div>

@if (!string.IsNullOrEmpty(mensaje))
{
    <p class="mensaje">@mensaje</p>
}

<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Descripción</th>
            <th>Responsable</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var orden in ordenes)
        {
            <tr>
                <td>@orden.Id</td>
                <td>@orden.Descripcion</td>
                <td>@orden.Responsable</td>
            </tr>
        }
    </tbody>
</table>

@code {
    private string nuevaDescripcion = "";
    private string nuevoResponsable = "";
    private string mensaje = "";

    private List<Orden> ordenes = new()
    {
        new Orden { Id = 1, Descripcion = "Cambio de aceite", Responsable = "Carlos" },
        new Orden { Id = 2, Descripcion = "Revisión eléctrica", Responsable = "Ana" }
    };

    private void AgregarOrden()
    {
        if (string.IsNullOrWhiteSpace(nuevaDescripcion) ||
            string.IsNullOrWhiteSpace(nuevoResponsable))
        {
            mensaje = "Todos los campos son obligatorios.";
            return;
        }

        ordenes.Add(new Orden
        {
            Id = ordenes.Count + 1,
            Descripcion = nuevaDescripcion,
            Responsable = nuevoResponsable
        });

        mensaje = "Orden agregada correctamente.";
        nuevaDescripcion = "";
        nuevoResponsable = "";
    }
}