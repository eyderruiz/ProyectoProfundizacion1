@page "/tipos_mantenimiento"
@layout PjrProject.Components.Layout.MainLayout
@rendermode InteractiveServer

<H2Pro Centrado="true" Texto="Tipos mantenimiento" />

<Layout_container>

    <!-- ================= FORM ================= -->
    <section class="form-section">

        <FormContainer>

            <!-- Texto -->
            <InputFlotante Label="Nombre"
                           Tipo="text"
                           @bind-Valor="nuevoNombre" />

            <!-- Número -->
            <InputFlotante Label="Descripción"
                           Tipo="number"
                           Min="0"
                           @bind-Valor="nuevaDescripcion" />

            

            <BotonPro Texto="Agregar Tipo"
                      OnClick="AgregarTipo" />

        </FormContainer>

    </section>

    <!-- ================= TABLE ================= -->
    <section class="table-section">

        <TablaPro>
            <Header>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Descripción</th>
                <th>Fecha</th>
            </tr>
            </Header>

            <Body>
                @foreach (var tipo in tiposMantenimiento)
                {
                <tr>
                    <td>@tipo.Id</td>
                    <td>@tipo.Nombre</td>
                    <td>@tipo.Descripcion</td>
                    <td>@tipo.Fecha</td>
                </tr>
            }
            </Body>
        </TablaPro>

    </section>

</Layout_container>

<MensajePro Texto="@mensaje" />

@code {
    private string nuevoNombre = "";
    private string nuevaDescripcion = "";
    private string fecha = "";
    private string mensaje = "";

    private class TipoMantenimiento
    {
        public int Id { get; set; }
        public string Nombre { get; set; } = "";
        public string Descripcion { get; set; } = "";
        public string Fecha { get; set; } = "";
    }

    private List<TipoMantenimiento> tiposMantenimiento = new()
    {
        new TipoMantenimiento
        {
            Id = 1,
            Nombre = "Preventivo",
            Descripcion = "Mantenimiento programado periódico",
            Fecha = "2026-01-01"
        },
        new TipoMantenimiento
        {
            Id = 2,
            Nombre = "Correctivo",
            Descripcion = "Reparación después de una falla",
            Fecha = "2026-01-10"
        }
    };

    private void AgregarTipo()
    {
        if (string.IsNullOrWhiteSpace(nuevoNombre) ||
            string.IsNullOrWhiteSpace(nuevaDescripcion) ||
            string.IsNullOrWhiteSpace(fecha))
        {
            mensaje = "Todos los campos son obligatorios.";
            return;
        }

        tiposMantenimiento.Add(new TipoMantenimiento
        {
            Id = tiposMantenimiento.Count + 1,
            Nombre = nuevoNombre,
            Descripcion = nuevaDescripcion,
            Fecha = fecha
        });

        mensaje = "Tipo agregado correctamente.";

        nuevoNombre = "";
        nuevaDescripcion = "";
        fecha = "";
    }
}